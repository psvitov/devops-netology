# Домашнее задание к занятию "11.02 Микросервисы: принципы"

Вы работаете в крупной компанию, которая строит систему на основе микросервисной архитектуры.
Вам как DevOps специалисту необходимо выдвинуть предложение по организации инфраструктуры, для разработки и эксплуатации.

## Задача 1: API Gateway 

Предложите решение для обеспечения реализации API Gateway. 
Составьте сравнительную таблицу возможностей различных программных решений. На основе таблицы сделайте выбор решения.

Решение должно соответствовать следующим требованиям:
- Маршрутизация запросов к нужному сервису на основе конфигурации
- Возможность проверки аутентификационной информации в запросах
- Обеспечение терминации HTTPS

---
### Ответ:
---

Рассмотрим основные распространенные шаблоны развертывания `API Gateway`:

- Пограничный шлюз - наиболее распространенный шаблон шлюза API, который соответствует традиционной архитектуре контроллера доставки приложений (ADC).
- Двухуровневый шлюз - двухуровневый/многоуровневый шаблон шлюза, который вводит разделение ролей для нескольких шлюзов.
- Микрошлюз - основывается на двухуровневом подходе, предоставляя отдельным командам выделенный шлюз.
- Шлюз для каждого модуля - шаблон шлюза для каждого модуля, изменяет шаблон микрошлюза, встраивая прокси-шлюзы в отдельные модули или контейнеры.
- Сервисный шлюз - шаблон развертывает шлюз в качестве входящего и исходящего прокси-сервера вместе с микрослужбой.

| Критерии  | Пограничный шлюз   | Двухуровневый шлюз   | Микрошлюз   | Шлюз для каждого модуля   | Сервисный шлюз   |
| :-------: | :-------: | :-------: | :-------: | :-------: | :-------: |
| SSL/TLS-терминация   | +    | +    | +    | +    | +    |
| Аутентификация   | +    | +    | +    | ...    | +    |
| Логгирование   | ...    | +    | ...    | +    | +    |
| Отслеживание инъекции   | ...    | +    | ...    | ...    | +    |
| Балансировка нагрузки   | ...    | +    | +    | ...    | +    |
| Интеграция обнаружения сервисов   | ...    | +    | +    | ...    | +    |
| Маршрутизация   | +    | ...    | +    | ...    | ...    |
| Авторизация   | +    | +    | ...    | ...    | +    |
| Ограничение скорости и очередь   | +    | ...    | +    | +    | ...    |
| Манипулирование запросом/ответом   | +    | ...    | ...    | ...    | ...    |

Проанализировав таблицу и вводные данные можно сделать вывод, что для организации инфраструктуры для разработки и эксплуатации наиболее подходят **Пограничный шлюз** и **Микрошлюз**.

## Задача 2: Брокер сообщений

Составьте таблицу возможностей различных брокеров сообщений. На основе таблицы сделайте обоснованный выбор решения.

Решение должно соответствовать следующим требованиям:
- Поддержка кластеризации для обеспечения надежности
- Хранение сообщений на диске в процессе доставки
- Высокая скорость работы
- Поддержка различных форматов сообщений
- Разделение прав доступа к различным потокам сообщений
- Протота эксплуатации

---
### Ответ:
---


| Текст  | Текст  | Текст  | Текст  | Текст  | Текст  | Текст  |
| :-------: | :-------: | :-------: | :-------: | :-------: | :-------: | :-------: |
| Текст  | Текст  | Текст  | Текст  | Текст  | Текст  | Текст  |
| Текст  | Текст  | Текст  | Текст  | Текст  | Текст  | Текст  |
| Текст  | Текст  | Текст  | Текст  | Текст  | Текст  | Текст  |
| Текст  | Текст  | Текст  | Текст  | Текст  | Текст  | Текст  |
| Текст  | Текст  | Текст  | Текст  | Текст  | Текст  | Текст  |
| Текст  | Текст  | Текст  | Текст  | Текст  | Текст  | Текст  |

https://www.google.com/search?q=%D0%B1%D1%80%D0%BE%D0%BA%D0%B5%D1%80%D1%8B+%D1%81%D0%BE%D0%BE%D0%B1%D1%89%D0%B5%D0%BD%D0%B8%D0%B9+%D1%81%D1%80%D0%B0%D0%B2%D0%BD%D0%B5%D0%BD%D0%B8%D0%B5&rlz=1C1GCEU_ruRU989RU989&sxsrf=ALiCzsZEiuLIVYPWcdCzKQjh_yFWGRuI1A%3A1669898696441&ei=yKGIY9PLGumxrgTPv5iQCQ&oq=%D0%91%D1%80%D0%BE%D0%BA%D0%B5%D1%80%D1%8B+%D1%81%D0%BE%D0%BE%D0%B1%D1%89%D0%B5%D0%BD%D0%B8%D0%B9&gs_lcp=Cgxnd3Mtd2l6LXNlcnAQARgEMgUIABCABDIFCAAQgAQyBQgAEIAEMgUIABCABDIFCAAQgAQyBQgAEIAEMgUIABCABDIFCAAQgAQyBQgAEIAEMgQIABAeOgoIABBHENYEELADSgQIQRgASgQIRhgAUJIXWJIXYN4paAFwAXgAgAFqiAFqkgEDMC4xmAEAoAEByAEIwAEB&sclient=gws-wiz-serp
https://habr.com/ru/post/573358/
https://www.okbsapr.ru/library/publications/shkola_kzi_chadov_mikhalchenko_2019/
