# Домашнее задание к занятию "10.01. Зачем и что нужно мониторить"

## Обязательные задания

1. Вас пригласили настроить мониторинг на проект. На онбординге вам рассказали, что проект представляет из себя 
платформу для вычислений с выдачей текстовых отчетов, которые сохраняются на диск. Взаимодействие с платформой 
осуществляется по протоколу http. Также вам отметили, что вычисления загружают ЦПУ. Какой минимальный набор метрик вы
выведите в мониторинг и почему?

2. Менеджер продукта посмотрев на ваши метрики сказал, что ему непонятно что такое RAM/inodes/CPUla. Также он сказал, 
что хочет понимать, насколько мы выполняем свои обязанности перед клиентами и какое качество обслуживания. Что вы 
можете ему предложить?

3. Вашей DevOps команде в этом году не выделили финансирование на построение системы сбора логов. Разработчики в свою 
очередь хотят видеть все ошибки, которые выдают их приложения. Какое решение вы можете предпринять в этой ситуации, 
чтобы разработчики получали ошибки приложения?

4. Вы, как опытный SRE, сделали мониторинг, куда вывели отображения выполнения SLA=99% по http кодам ответов. 
Вычисляете этот параметр по следующей формуле: summ_2xx_requests/summ_all_requests. Данный параметр не поднимается выше 
70%, но при этом в вашей системе нет кодов ответа 5xx и 4xx. Где у вас ошибка?

---
### Ответ:
---

1. В задании просматривается несколько метрик:

- метрики самих текстовых отчетов, а именно сохранение на диск: можно добавить в мониторинг количество запросов на отчет и количество сохраненных запросов интервал каждые 1 час. Большая разница между количеством запросов и количеством сохраненых отчетов может говорить об ошибках работы.
- метрики работы жесткого диска: обязательная метрика объема оставшегося свободного места, так как отчеты хранятся на диске, так же добавить метрики Disk IOPS и Disk Latency, это позволит просчитать производительность в целом при больших нагрузках на ресурс
- метрики https: добавить метрику доступности ресурса (ping), если это внешний ресурс, добавить метрики доступности шлюза и DNS-серверов провйдера
- метрики CPU: добавить метрику использования процессора системынми службами и прикладным ПО CPU usage
- метрики оперативной памяти

2. Можно предложить следующее отслеживание метрик:

- разница между запросами на создание отчетов и сохраненными отчетами, то есть результат работы ресурса. Например 95% запросов должны сохраняться и быть доступны.
- уровень доступности работы ресурса. Например, если необходима работа 24/7/365 можно указать доступность 95% с учетом технического обслуживания и 5% на отказы ресурса.

3. В данной ситуации можно воспользоваться облачными решениями. Выбор будет зависеть от объема хранимой информации и глубины хранения данных. Например сервис SumoLogic  в бесплатной версии предлагает хранить 500 мегабайт в день с 7-дневным хранением данных с любым исходным типом собираемых данных. Так же, как вариант, воспользоваться бесплатным аккаунтом AWS на 12 месяцев, при условии, что есть кредитная карта для регистрации и использование сервисов не превысит значения, предусмотренные уровнем бесплатного использования. 

4. Необходимо просмотреть все коды ответов, так как кроме кодов ответа 4xx и 5xx, есть коды ответа 1хх (информационные) и 3хх (перенаправления). Возможно эти коды и составляют 30%.
